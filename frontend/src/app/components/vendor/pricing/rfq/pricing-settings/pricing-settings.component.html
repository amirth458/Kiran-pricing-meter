<div class="wrapper">
  <form class="table" [formGroup]="formGroup" (submit)="save()">
    {{ formGroup.valid }}
    <div class="row header p-3">Pricing Information</div>
    <div class="row mb-2">
      <div class="setting-name p-3 col-6">
        Cutoff for Manual Pricing
      </div>
      <div class="setting-control d-flex align-items-center col-6">
        <div class="d-flex flex-column w-100 h-100">
          <div class="d-flex flex-row justify-content-center align-items-center w-100 h-100">
            <div
              class="d-flex justify-content-start align-items-center flex-5"
              *ngIf="formGroup.get('pricingType').value !== profilePricingType.PRICING"
            >
              <input
                digitOnly
                [min]="1"
                [step]="1"
                formControlName="minElligibleProcessProfile"
                type="number"
                class="setting-input"
                (click)="$event.stopPropagation()"
              />
              <span>Eligible Process Profiles</span>
            </div>
            <div
              class="d-flex justify-content-start align-items-center flex-5"
              *ngIf="formGroup.get('pricingType').value !== profilePricingType.PROFILE"
            >
              <input
                digitOnly
                [min]="1"
                [step]="1"
                type="number"
                formControlName="minElligiblePricingProfile"
                class="setting-input"
                (click)="$event.stopPropagation()"
              />
              <span>Eligible Pricing Profiles</span>
            </div>
            <div
              ngbDropdown
              class="pricing-drop-down {{ pricingDropDown.isOpen() ? 'position-absolute popup' : '' }}"
              #pricingDropDown="ngbDropdown"
            >
              <button
                class="btn transparent text-theme-green p-0"
                type="button"
                id="manualPricingDropdown"
                [class.d-none]="pricingDropDown.isOpen()"
                ngbDropdownToggle
              >
                <i class="fa fa-chevron-down"></i>
              </button>
              <ul class="w-100" ngbDropdownMenu aria-labelledby="manualPricingDropdown">
                <li class="position-absolute move-right">
                  <button
                    class="btn transparent text-theme-green align-right"
                    type="button"
                    (click)="pricingDropDown.close()"
                  >
                    <i class="fa fa-chevron-up"></i>
                  </button>
                </li>
                <li
                  class="dropdown-item"
                  (click)="setManualPricingSection(item.id)"
                  [ngClass]="{ active: formGroup.get('pricingType').value === item.id }"
                  *ngFor="let item of pricingDropDownItems"
                >
                  {{ item.value }}
                </li>
              </ul>
            </div>
          </div>
          <div class="d-flex flex-row  w-100" *ngIf="formGroup.errors && formGroup.errors.hasValidProfile">
            <span class="footnote red p-absolute">
              please enter value zero and above
            </span>
          </div>
        </div>
      </div>
    </div>
    <div class="row mb-2">
      <div class="setting-name p-3 col-6">
        Of eligible pricing profile, present Bid No
      </div>
      <div class="setting-control d-flex align-items-center col-6">
        <div class="d-flex align-items-center flex-4"></div>
        <div class=" flex-5">
          <div class="d-flex align-items-center mr-3">
            <input
              digitOnly
              [min]="1"
              [step]="1"
              type="number"
              formControlName="presentBidNumberFromBottom"
              class="setting-input"
            />
            <span>
              (from bottom - {{ formGroup.value.presentBidNumberFromBottom }}
              <sup>
                {{ getOrderUnit(formGroup.value.presentBidNumberFromBottom) }}
              </sup>
              price)
            </span>
          </div>
          <span *ngIf="formGroup.errors && formGroup.errors.invalidBidNumber" class="footnote red p-absolute">
            Present Bid No must be below than Cutoff for Manual Pricing
          </span>
        </div>
      </div>
    </div>
    <div class="row mb-2">
      <div class="setting-name p-3 col-6">
        Add what % Incremental Margin to Bid No
        {{ formGroup.value.presentBidNumberFromBottom }}
      </div>
      <div class="setting-control d-flex align-items-center col-6">
        <div class="d-flex align-items-center flex-4"></div>
        <div class="d-flex align-items-center flex-5">
          <input
            digitOnly
            [min]="1"
            [step]="1"
            type="number"
            formControlName="incrementalMarginPercent"
            class="setting-input"
          />
          <span>%</span>
        </div>
      </div>
    </div>
    <div class="row mb-2">
      <div class="setting-name p-3 col-6">
        Add what $ Incremental Margin to Bid No
        {{ formGroup.value.presentBidNumberFromBottom }}
      </div>
      <div class="setting-control d-flex align-items-center col-6">
        <div class="d-flex align-items-center flex-4"></div>
        <div class="d-flex align-items-center flex-5">
          <input
            digitOnly
            [min]="1"
            [step]="1"
            type="number"
            formControlName="incrementalMarginRate"
            class="setting-input"
          />
          <span>$</span>
        </div>
      </div>
    </div>
    <!-- <div class="row mb-2">
      <div class="setting-name p-3 col-6">
        Default Eligibility for auto-pricing approach
      </div>
      <div class="auto-pricing-control col-6 d-flex">
        <div
          class="col-6 dropdown d-flex align-items-center justify-content-center"
          data-toggle="dropdown"
          aria-haspopup="true"
          aria-expanded="false"
          id="autoPricingApproach"
        >
          {{
            formGroup.value.autoPricingEligibilityType &&
              formGroup.value.autoPricingEligibilityType.name
          }}
          <div class="icon">
            <i class="fa fa-chevron-down"></i>
          </div>
        </div>
        <div class="col-6 d-flex align-items-center justify-content-center">
          {{
            formGroup.value.autoPricingEligibilityType &&
              formGroup.value.autoPricingEligibilityType.description
          }}
        </div>
        <ul class="popup dropdown-menu" aria-labelledby="autoPricingApproach">
          <li
            class="dropdown-item d-flex auto-pricing-control"
            (click)="setEligibility(index)"
            [ngClass]="{ active: selectedEligibility === index }"
            *ngFor="let item of defaultEligibilities; index as index"
          >
            <div class="col-6 p-3">
              {{ item.name }}
              <div class="icon" *ngIf="index === 0">
                <i class="fa fa-chevron-up"></i>
              </div>
            </div>
            <div class="col-6">
              {{ item.description }}
            </div>
          </li>
        </ul>
      </div>
    </div> -->
    <!-- <div class="row mb-2 d-none">
      <div class="setting-name p-3 col-6">Specificity Premium</div>
      <div class="setting-control d-flex align-items-center col-6">
        <div class="d-flex align-items-center flex-4"></div>
        <div class="d-flex align-items-center flex-5">
          <input
            type="number"
            formControlName="specificityPremium"
            class="setting-input"
          />
          <span>% per level of specificity</span>
        </div>
      </div>
    </div> -->
    <div class="row mb-2">
      <div class="setting-name p-3 col-6">Time to Expire Quote</div>
      <div class="setting-control d-flex align-items-center col-6">
        <div class="d-flex align-items-center flex-4"></div>
        <div class="d-flex align-items-center flex-5">
          <input
            digitOnly
            [min]="1"
            [step]="1"
            type="number"
            formControlName="quoteExpirationTime"
            class="setting-input"
          />
          <span>hours</span>
        </div>
      </div>
    </div>
  </form>
</div>
