<div class="wrapper container-fluid">
  <div class="header d-flex align-items-center mb-3" [ngClass]="{'manual-price': part?.manualPricingAllowed}">
    <h5 class="text-center flex-grow-1">{{!(part?.manualPricingAllowed)? '' : part?.partStatusType.id == 2 ? 'Queued for Manual Pricing: ' : 'Manually Priced: '}} Part {{ part?.rfqMedia.projectRfqId + "." + part?.id }}</h5>
    <button
      type="button"
      class="btn btn-back theme white"
      (click)="backButton()"
    >
      <i class="fas fa-chevron-left"></i>
      <span>
        Back
      </span>
    </button>
  </div>
  <div class="row">
    <div class="col-12 theme-table single-row-table">
      <ag-grid-angular
        class="ag-theme-balham w-100 h-100"
        [rowData]="rowData[0]"
        [gridOptions]="gridOptions[0]"
        (gridReady)="onGridReady(0, $event)"
      ></ag-grid-angular>
    </div>
  </div>

  <p class="part-header font-weight-bold mt-4">Price Summary</p>
  <div class="row">
    <div class="col-12 theme-table single-row-table">
      <ag-grid-angular
        class="ag-theme-balham w-100 h-100"
        [rowData]="rowData[1]"
        [gridOptions]="gridOptions[1]"
        (gridReady)="onGridReady(1, $event)"
      ></ag-grid-angular>
    </div>
  </div>

  <p class="part-header font-weight-bold mt-4">Price Profile Detail</p>
  <div class="row">
    <div class="col-12">
      <div class="price-profile-detail">
        <p>
          Process Profile Name:
          <mark>{{ pricingProfile?.pricingProfileDetailedView.processProfile.name }}</mark>
        </p>
        <p>
          Pricing Parameter Set Nickname:
          <mark>{{ pricingProfile?.pricingProfileDetailedView.processProfile.parameterNickName }}</mark>
        </p>
        <p>
          Conditions:
          <ng-container *ngFor="let condition of pricingProfile?.pricingProfileDetailedView.processPricingConditionList">
            <mark>{{ condition.processPricingConditionType.name }} {{condition.operatorType.symbol}} {{condition.valueSignType.symbol}} {{condition.value}} {{condition.unitType.symbol}}</mark>
          </ng-container>
        </p>
      </div>
    </div>
  </div>
  <div class="row mt-4">
    <div class="col-12">
      <table class="table price-profile-table">
        <thead>
          <tr>
            <th>Invoice Item</th>
            <th>Line Item</th>
            <th>Value</th>
            <th>Per</th>
            <th>Part Value</th>
            <th>Measurement Unit</th>
            <th>Sub-Order Value</th>
            <th>Sub Total</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of pricingProfile?.pricingProfileDetailedView.partPricingProfileViews">
            <td>{{ item.processPricingParameters.invoiceLineItem.invoiceItem.name }}</td>
            <td>{{ item.processPricingParameters.invoiceLineItem.name}}</td>
            <td class="text-center">{{item.processPricingParameters.currency.symbol}} {{ item.processPricingParameters.price }}</td>
            <td class="text-center">{{ item.processPricingParameters.quantity }}</td>
            <td class="text-center">{{ item.processPricingParameters.quantityUnitType?.measurementType.name }}</td>
            <td class="text-center">{{ item.processPricingParameters.quantityUnitType?.symbol }}</td>
            <td class="text-center">{{ item.subOrderValue.value }}</td>
            <td class="text-center">{{ item.subTotal }}</td>
          </tr>
          <tr>
            <td colspan="5"></td>
            <td colspan="2" class="text-center font-weight-bold subtotal">
              Subtotal
            </td>
            <td class="text-center font-weight-bold subtotal">$ {{getSubTotal()}}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
