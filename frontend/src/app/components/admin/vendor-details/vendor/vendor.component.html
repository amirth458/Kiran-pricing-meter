<div class="wrapper shadow">
  <form [formGroup]="detailForm" class="needs-validation">
    <div class="form-row">
      <div class="form-group theme col-md-6">
        <label>Vendor Name</label>
        <input required readonly formControlName="name" class="form-control" placeholder="Vendor Name" />
        <span *ngIf="showRequired('name', 1)" class="footnote red">* Required</span>
      </div>
      <div class="form-group theme col-md-3">
        <label>Vendor Type</label>
        <select required formControlName="vendorType" class="form-control">
          <option selected value="">Vendor Type</option>
          <option *ngFor="let item of vendorTypes" [value]="item.id">{{ item.name }}</option>
        </select>
        <span *ngIf="showRequired('vendorType', 2)" class="footnote red">* Required</span>
      </div>
      <div class="form-group theme col-md-3">
        <label>Vendor Industry</label>
        <select required formControlName="vendorIndustry" class="form-control">
          <option selected value="">Choose...</option>
          <option *ngFor="let item of vendorIndustries" [value]="item.id"> {{ item.name }}</option>
        </select>
        <span *ngIf="showRequired('vendorIndustry', 2)" class="footnote red">* Required</span>
      </div>
    </div>
    <div class="form-row">
      <div class="form-group theme col-md-3">
        <label>Primary Contact Name</label>
        <input
          readonly
          required
          formControlName="primaryContactFirstName"
          class="form-control"
          placeholder="First Name"
        />
        <span *ngIf="showRequired('primaryContactFirstName', 1)" class="footnote red">* Required</span>
      </div>
      <div class="form-group theme col-md-3">
        <label> &nbsp; </label>
        <input
          readonly
          required
          formControlName="primaryContactLastName"
          class="form-control"
          placeholder="Last Name"
        />
        <span *ngIf="showRequired('primaryContactLastName', 1)" class="footnote red">* Required</span>
      </div>
      <div class="form-group theme col-md-3">
        <label>Email</label>
        <input readonly required type="email" formControlName="email" class="form-control" placeholder="Email" />
        <span *ngIf="showRequired('email', 1)" class="footnote red">* Required</span>
      </div>
      <div class="form-group theme col-md-3 phone">
        <label>Phone</label>
        <international-phone-number
          readonly
          class="readonly"
          formControlName="phone"
          placeholder="Enter phone number"
          [required]="true"
          name="phone_number"
        ></international-phone-number>
        <span *ngIf="showRequired('phone', 1)" class="footnote red">* Required</span>
        <span *ngIf="!showRequired('phone', 1) && detailForm.controls.phone.status === 'INVALID'" class="footnote red"
          >* Phone number is invalid.</span
        >
      </div>
    </div>
    <div class="form-row">
      <div class="form-group theme col-md-3">
        <label>Street 1</label>
        <input readonly required formControlName="street1" class="form-control" placeholder="1234 Main St" />
        <span *ngIf="showRequired('street1', 1)" class="footnote red">* Required</span>
      </div>
      <div class="form-group theme col-md-3">
        <label>Street 2</label>
        <input readonly formControlName="street2" class="form-control" placeholder="1234 Main St" />
      </div>
      <div class="form-group theme col-md-6">
        <label>City</label>
        <input readonly required formControlName="city" class="form-control" />
        <span *ngIf="showRequired('city', 1)" class="footnote red">* Required</span>
      </div>
    </div>
    <div class="form-row">
      <div class="form-group theme col-md-3">
        <label>State/Territory/Region</label>
        <input readonly required formControlName="state" class="form-control" />
        <span *ngIf="showRequired('state', 1)" class="footnote red">* Required</span>
      </div>
      <div class="form-group theme col-md-3">
        <label>Zip</label>
        <input
          readonly
          required
          formControlName="zipCode"
          class="form-control"
          placeholder="Zip Code"
          pattern="^[0-9\s]{5}$"
        />
        <span *ngIf="showRequired('zipCode', 1)" class="footnote red">* Required</span>
      </div>
      <div id="countryComponent" class="form-group theme col-md-6">
        <label>Country</label>
        <select readonly required formControlName="country" class="form-control">
          <option selected value="">Country</option>
          <option *ngFor="let item of countries" [value]="item.id">{{ item.name }}</option>
        </select>
        <span *ngIf="showRequired('country', 1)" class="footnote red">* Required</span>
      </div>
    </div>
    <div class="form-row">
      <div class="form-group theme col-md-6">
        <label>
          ProdEX Opportunities
        </label>
        <select readonly formControlName="confidentiality" class="form-control">
          <option selected value="">ProdEX Opportunities</option>
          <option *ngFor="let item of confidentialities" [value]="item.id"> {{ item.name }}</option>
        </select>
      </div>
      <!-- <div class="form-group theme col-md-6">
        <label>Certifications</label>
        <ul class="disabled-certifications">
          <li *ngFor="let item of selectedCertifications">{{ item.name }}</li>
        </ul>
      </div> -->

      <div class="form-group theme col-md-6 align-bottom">
        <div style="width: 100%">
          <label>Certifications</label>
          <ng-select
            [multiple]="true"
            dropdownPosition="top"
            [virtualScroll]="true"
            [hideSelected]="true"
            placeholder="Certifications"
            [selectOnTab]="true"
            [(ngModel)]="selectedCertifications"
            [ngModelOptions]="{ standalone: true }"
          >
            <ng-option *ngFor="let item of certifications" [value]="item.id">
              {{ item.name }}
            </ng-option>
          </ng-select>
        </div>
      </div>
    </div>
    <div class="form-row">
      <div class="form-group col-md-12" style="justify-content: center; align-items: flex-end; display: flex;">
        <button
          type="button"
          (click)="approveUser()"
          *ngIf="status === 3 || status === 2"
          class="btn btn-approve theme"
        >
          Approve
        </button>
        <button type="button" *ngIf="status === 1" class="btn btn-approved theme">
          Approved
        </button>
        <button
          type="button"
          (click)="onDeclineUser($event)"
          *ngIf="status === 3 || status === 1"
          class="btn btn-decline theme"
        >
          Decline
        </button>
        <button type="button" *ngIf="status === 2" class="btn btn-declined theme">
          Declined
        </button>
      </div>
    </div>
  </form>
</div>

<!-- Button trigger modal -->
<button #modal type="button" class="btn btn-primary d-none" data-toggle="modal" data-target="#declineModal"></button>

<!-- Modal -->
<div
  class="modal fade theme"
  id="declineModal"
  tabindex="-1"
  role="dialog"
  aria-labelledby="declineModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="declineModalLabel">Decline Comment</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="form-row">
          <div class="form-group theme col-md-12">
            <label>Primary Contact Name</label>
            <input class="form-control" readonly [(ngModel)]="primaryContactName" placeholder="Primary Contact Name" />
          </div>
          <div class="form-group theme col-md-12">
            <label>Comment</label>
            <textarea
              required
              class="form-control"
              [(ngModel)]="declineComments"
              placeholder="Please describe here message to decline."
            ></textarea>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">
          Close
        </button>
        <button type="button" class="btn btn-danger" (click)="declineUser()">
          Decline
        </button>
      </div>
    </div>
  </div>
</div>
