<div class="wrapper shadow">
  <span class="form-notification"><i>Let us now about few of machines  on your floor.</i></span> 
  <div *ngIf="error.length>1" class="alert alert-danger" role="alert">
    {{error}}
  </div>

  <form [formGroup]="form" novalidate class="needs-validation" (submit)="add($event)">
    <div class="form-row">

      <div class="form-group theme col-md-6">
        <label for="machineName">Machine Name</label>
        <input required type="text" formControlName="name" class="form-control" id="machineName" name="machineName"
          placeholder="Machine Name" />
        <span *ngIf="showRequired('name', 1)" class="footnote red">* Required</span>
      </div>


      <div class="form-group theme col-md-6">
        <label for="serialNumber">Serial Number</label>
        <input required type="text" formControlName="serialNumber" class="form-control" id="serialNumber"
          name="serialNumber" placeholder="Vendor Specific Unique Identifier" />
        <span *ngIf="showRequired('serialNumber', 1)" class="footnote red">* Required</span>
      </div>

    </div>
    <div class="form-row">

      <div class="form-group theme col-md-6">
        <label for="equipment">Equipment</label>
        <ng-select #equipmentInput id="equipmentInput" (change)="clearStore()" (keyup)="onEquipmentSearch($event)"
          placeholder="Add Equipment" loadingText="Searching..." [multiple]="false" [loading]="isEquipmentLoading"
          dropdownPosition="bottom" [virtualScroll]=" true" [hideSelected]="true" [selectOnTab]="true"
          formControlName="equipment">
          <!-- [items]="equipments" bindValue="id" bindLabel="name" -->
          <ng-container *ngFor="let item of equipments">
            <ng-option [disabled]="item.id == ''" [value]="item.id">{{item.name}}</ng-option>
          </ng-container>
        </ng-select>
        <span *ngIf="showRequired('equipment', 3)" class="footnote red">* Required</span>
      </div>

      <div class="form-group theme col-md-6">
        <label for="material">Material</label>
        <ng-select #materialInput id="materialInput" (change)="clearStore()" (keyup)="onMaterialSearch($event)"
          placeholder="Add Materials" loadingText="Searching..." [loading]="isMaterialLoading" [multiple]="true"
          dropdownPosition="bottom" [virtualScroll]=" true" [hideSelected]="true" [selectOnTab]="true"
          formControlName="material">
          <ng-container *ngFor="let item of materials">
            <ng-option [disabled]="item.id == ''" [value]="item.id">{{item.name}}</ng-option>
          </ng-container>

        </ng-select>
        <span *ngIf="showRequired('material', 3)" class="footnote red">* Required</span>
      </div>

    </div>

    <div class="row">

      <div class="col-md-10 col-sm-8">
        
        <span class="form-notification"><i>You will have an opportunity to add more machines and associate them  <br /> with specic facilities once your application is approved.</i></span> 
      </div>

      <div class="form-group col-md-2 col-sm-4">
        <button type="button"  (click)="add($event)"  class="btn btn-white theme">{{ this.isUpdate ? 'Update' : 'Add'}}</button>
      </div>

    </div>
  </form>
  <div class="form-row" style="margin-top: 20px">

    <div class="table theme-table">

      <div class="page-size">
        Page Size:
        <select id="page-size" [(ngModel)]="pageSize" (ngModelChange)="pageSizeChanged($event)">
          <option selected value="10">10</option>
          <option value="20">20</option>
          <option value="50">50</option>
          <option value="100">100</option>
          <option value="200">200</option>
        </select>
      </div>

      <ag-grid-angular style="width: 100%; height: 300px" class="ag-theme-balham" [rowData]="rowData"
        [gridOptions]="gridOptions">
      </ag-grid-angular>
    </div>
  </div>
  
  <div class="form-row " style="justify-content: center">
    <div class="form-group col-md-3">
      <button type="button" (click)="onSaveMachineInformation($event)" class="btn btn-primary theme">Submit</button>
    </div>
  </div>
</div>

<!-- Button trigger modal -->
<button #modal type="button" class="btn btn-primary d-none" data-toggle="modal" data-target="#machineModal">
  </button>
  
  <!-- Modal -->
  <div class="modal fade theme" id="machineModal" tabindex="-1" role="dialog" aria-labelledby="machineModalLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="machineModalLabel">Confirm Action</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          Are you sure you want to delete the machine ?
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          <button type="button" class="btn btn-danger" (click)="deleteMachine()">Delete</button>
        </div>
      </div>
    </div>
  </div>
  